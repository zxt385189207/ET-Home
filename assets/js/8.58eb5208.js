(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{315:function(i,e,t){"use strict";t.r(e);var v=t(6),l=Object(v.a)({},(function(){var i=this,e=i._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":i.$parent.slotKey}},[e("h1",{attrs:{id:"运行步骤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行步骤"}},[i._v("#")]),i._v(" 运行步骤")]),i._v(" "),e("ol",[e("li",[e("p",[i._v("visual studio用户须知：")]),i._v(" "),e("ul",[e("li",[i._v("版本：\n"),e("ul",[e("li",[i._v("Win10及以上用户，使用.net6, VS 版本，必须使用2022及以上。注意，VS 2019 不支持 .net6，不能使用。")]),i._v(" "),e("li",[i._v("Win7 用户，无法安装 VS 2022，需要使用 .net 5 和 VS 2019，但注意需要额外设置以支持ET编译。")])])]),i._v(" "),e("li",[i._v("依赖：\n"),e("ul",[e("li",[i._v('需要安装"使用Unity的游戏开发"扩展。')]),i._v(" "),e("li",[i._v('需要在"工具-选项-适用于Unity的工具-常规"里，把杂项里的禁止完整生成项目改为False，否则导致你Codes目录里的代码报错。')])])])])]),i._v(" "),e("li",[e("p",[i._v("使用Rider2021.2.2（更新到最新版）, 需要安装以下内容:")]),i._v(" "),e("ul",[e("li",[i._v("Rider的Unity插件")]),i._v(" "),e("li",[i._v("安装 .net6")]),i._v(" "),e("li",[i._v('2021.2.2 会报".NET SDK 6.0.101 is not fully supported in Rider"，但实际不影响编译(2021.12.21)')]),i._v(" "),e("li",[i._v("2021.3.x 完全支持 .net6")])])]),i._v(" "),e("li",[e("p",[i._v("master分支需要unity2020.3版（用到了C#8的语法）")])]),i._v(" "),e("li",[e("p",[i._v("启动Unity， 菜单 File -> Open Project... -> Open 选中ET/Unity文件夹，点击选择文件夹按钮。")])]),i._v(" "),e("li",[e("p",[i._v("点击Unity菜单 Assets -> Open C# Project 启动vs")])]),i._v(" "),e("li",[e("p",[i._v("运行Unity菜单上的 Tools->BuildCode，这一步将编译客户端代码")])]),i._v(" "),e("li",[e("p",[i._v("用Rider打开 ET/Client-Server.sln 编译（"),e("strong",[i._v("一定要全部工程编译，右键VS解决方案，全部编译")]),i._v("）\n这里报红发现引用错误，是因为Unity的库还没编译到Unity/Temp/Debug目录下面，一般不用管，必须保证Unity是开启的，然后只需要直接编译Client-Server即可，\nClient-Server会编译Unity.Mono。Unity.Mono会把自己依赖的Unity的库复制到Unity/Temp/Debug中。Unity.Model Unity.Hotfix\nUnity.ModelView UnityHotfix.View都会依赖Unity/Temp/Debug下的库。如果还是爆红，关闭vs或者rider，先打开unity，再打开Client-Server.sln，再\n编译Client-Server")])]),i._v(" "),e("li",[e("p",[i._v("导表工具，编译完成后命令行进入 Bin 目录，执行 dotnet Tools.dll --AppType=ExcelExporter")])]),i._v(" "),e("li",[e("p",[i._v("导出协议工具，编译完成后进入 Bin 目录，执行 dotnet Tools.dll --AppType=Proto2CS")])]),i._v(" "),e("li",[e("p",[i._v("启动服务器: dotnet Server.dll --Process=1 --Console=1")])]),i._v(" "),e("li",[e("p",[i._v("Unity中双击Scenes目录中的Init场景，点击Play即可运行")])])]),i._v(" "),e("h1",{attrs:{id:"测试状态同步demo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试状态同步demo"}},[i._v("#")]),i._v(" 测试状态同步demo")]),i._v(" "),e("ol",[e("li",[e("p",[i._v("想修改配置就进入 Excel 目录修改对应的表格，做运行步骤的第6步，然后重新运行 Server.App工程来启动服务端。")])]),i._v(" "),e("li",[e("p",[i._v("Unity->tools菜单->打包工具，选择PC，勾选是否打包exe，点击开始打包，打出一个PC包在Release目录下。")])]),i._v(" "),e("li",[e("p",[i._v("运行Unity 登录 进入大厅 进入场景")])]),i._v(" "),e("li",[e("p",[i._v("运行PC包 登录 进入大厅")])]),i._v(" "),e("li",[e("p",[i._v("点击鼠标右键即可移动人物")])])]),i._v(" "),e("h1",{attrs:{id:"注意事项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[i._v("#")]),i._v(" 注意事项：")]),i._v(" "),e("p",[i._v("一. 出错原因都是：")]),i._v(" "),e("ol",[e("li",[i._v("中文目录。")]),i._v(" "),e("li",[i._v("VS 版本低")]),i._v(" "),e("li",[i._v("Rider没有安装相关组件")]),i._v(" "),e("li",[i._v("没安装 .net6")]),i._v(" "),e("li",[i._v("没编译服务端所有工程")]),i._v(" "),e("li",[i._v("Rider要更新到最新版本")]),i._v(" "),e("li",[i._v("Unity版本太低")]),i._v(" "),e("li",[i._v("Win7 用户，没有特别设置")]),i._v(" "),e("li",[i._v("*编译过程中如果出现依赖问题，也有可能是 Unity - External Tools - Generate .csproj files for:\n当中勾选了\n"),e("ol",[e("li",[i._v("Registry packages")]),i._v(" "),e("li",[i._v("Build-in packages")])])]),i._v(" "),e("li",[i._v('*如果打包报错缺少"StreamingAsset"，自己在 ET\\Unity\\Assets 下新建一个 StreamingAsset 文件夹即可。')])])])}),[],!1,null,null,null);e.default=l.exports}}]);